# Data Standards
This directory contains data standards for all morphology wrappers. Data
standards are program configurations and constraints which are not expected to
change frequently.


# FICLOs
MorphFITS operates on data using the categorization structure of FICLOs, which
is an acronym for the Field, Image version, Catalog version, fiLter, and Object ID
of a galaxy or cluster to be fitted.

|Letter|Variable|Description|Example|
|:---|:---|:---|:---|
|`F`|`field`|Center of field at which JWST instrument is pointed.|`abell2744clu`|
|`I`|`image_version`|Program used to process JWST data.|`grizli-v7.2`|
|`C`|`catalog_version`|Source of photometric catalog.|`dja-v7.2`|
|`L`|`filter`|Instrument filter(s) used.|`f200w-clear`|
|`O`|`object`|Integer ID of galaxy or cluster in catalog.|`4215`|
|`i`|`input_root`|Root input directory.|`morphfits_root/input`|
|`o`|`output_root`|Root output directory.|`morphfits_root/output`|
|`p`|`product_root`|Root products directory.|`morphfits_root/products`|
|`r`|`run_root`|Root directory for each run.|`morphfits_root/runs`|
|`D`|`date_time`|Datetime at start of run, in ISO-8601.|`20230625T145928`|
|`N`|`run_number`|Number of run if multiple are started at the same datetime.|`02`|


# Filesystem Structure (`paths.yaml`)
The program operates in three data stages - input, products, and output. Input
files are downloaded directly from the [JWST Mosaics
index](https://s3.amazonaws.com/grizli-v2/JwstMosaics/v7/index.html) and [STSci
simulated PSFs
directory](https://stsci.app.box.com/v/jwst-simulated-psf-library/folder/174723156124),
and expected to be organized in the structure detailed below. Product and output
files and directories are generated by the program.

<table>
<tr>
<th>
In Filesystem
</th>
<th>
In Program
</th>
</tr>

<tr>
<td>
<pre>
morphfits_root/
├── input/
│   ├── psfs/
│   │   └── PSF_NIRCam_in_flight_opd_filter_L.fits
│   └── F/
│       └── I/
│           ├── F-I-ir_seg.fits
│           ├── F-I-fix_phot_apcorr.fits
│           └── L/
│               ├── F-I-L_dr[c/z]_exp.fits
│               ├── F-I-L_dr[c/z]_sci.fits
│               └── F-I-L_dr[c/z]_wht.fits
├── output/
│   ├── catalogs/
│   │   ├── merge/
│   │   │   └── D_N_catalog.csv
│   │   └── morphology/
│   │       └── F_I_C_catalog.csv
│   ├── histograms/
│   │   └── D_N_histogram.png
│   └── F/
│       └── I/
│           └── C/
│               └── L/
│                   └── O/
│                       ├── F_I_C_L_O_galfit.log
│                       ├── F_I_C_L_O_galfit.fits
│                       └── F_I_C_L_O_galfit.png
├── products/
│   └── F/
│       └── I/
│           └── C/
│               └── L/
│                   └── O/
│                       ├── F_I_C_L_O_mask.fits
│                       ├── F_I_C_L_O_psf.fits
│                       ├── F_I_C_L_O_sigma.fits
│                       ├── F_I_C_L_O_stamp.fits
│                       └── F_I_C_L_O.feedfile
└── runs/
    └── F.D.N/
        ├── catalog.csv
        ├── files.csv
        ├── histogram.png
        ├── morphfits.log
        └── settings.yaml
</pre>
</td>

<td>
<pre>
morphfits_root
input_root
input_psfs
input_psf
input_f
input_fi
input_catalog
input_segmap
input_fil
exposure
science
weights
output_root
output_catalogs
output_merge_catalogs
merge_catalog
output_morphology_catalogs
morphology_catalog
output_histograms
histogram
output_f
output_fi
output_fic
output_ficl
output_ficlo
log_galfit
model_galfit
plot_galfit
product_root
product_f
product_fi
product_fic
product_ficl
product_ficlo
mask
psf
sigma
stamp
feedfile
run_root
run
run_catalog
run_files
run_histogram
run_log
run_settings
</pre>
</td>
</tr>
</table>